<!doctype html>
<html lang="en" class=" scrollbar-type-1 sb-cyan">

<head>
    <meta charset="utf-8" />
    <title>Hue Light Control UI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- Metro 4 -->
    <link rel="stylesheet" href="https://cdn.metroui.org.ua/v4/css/metro-all.min.css">
    <link rel="stylesheet" href="index.css">

    <!-- Load AngularJS -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

    <script>
        window.on_page_functions = [];
    </script>


    <script type="text/javascript">
        var app = angular.module("RoomManagement", []);


        //Controller Part
        app.controller("RoomManagementController", function ($scope, $http) {

            //Initialize page with default data which is blank in this example
            $scope.rooms = [];

            $scope.selectedRoom = [];

            //Now load the data from server
            _refreshPageData();

            function updateSelectedRoom(roomName) {
            }

            /* Private Methods */
            //HTTP GET- get all rooms collection
            function _refreshPageData() {
                $http({
                    method: 'GET',
                    url: '/api/rooms'
                }).then(function successCallback(response) {
                    $scope.rooms = response.data;
                }, function errorCallback(response) {
                    console.log(response.statusText);
                });
                
                $http({
                    method: 'GET',
                    url: '/api/rooms/q?rn=' + roomName
                }).then(function successCallback(response) {
                    $scope.selectedRoom = response.data;
                }, function errorCallback(response) {
                    console.log(response.statusText);
                });

            }

            function _success(response) {
                _refreshPageData();
                _clearForm()
            }

            function _error(response) {
                alert(response.data.message || response.statusText);
            }

            //Clear the form
            function _clearForm() {
            }
        });
    </script>
</head>

<body ng-app="RoomManagement" ng-controller="RoomManagementController" class="m4-cloak h-vh-100">


        <!-- content area -->
        <div class="content-inner h-100">

        </div>



    <script src="https://cdn.metroui.org.ua/v4/js/metro.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</body>

</html>